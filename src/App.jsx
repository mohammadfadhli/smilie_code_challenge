import { useEffect, useState } from "react";
import BarCharts from "./components/BarCharts";
import ReformatData from "./helper/ReformatData";
import LineCharts from "./components/LineCharts";

function App() {
    const [data, setData] = useState(0);
    const [isLoading, setIsLoading] = useState(false);
    const [error, setError] = useState(0);
    // const apiUrl = import.meta.env.VITE_WEATHER_API;

    const static_data = {
        latitude: 1.125,
        longitude: 104,
        generationtime_ms: 0.04601478576660156,
        utc_offset_seconds: 28800,
        timezone: "Asia/Singapore",
        timezone_abbreviation: "+08",
        elevation: 27,
        hourly_units: {
            time: "iso8601",
            relativehumidity_2m: "%",
            direct_radiation: "W/m²",
        },
        hourly: {
            time: [
                "2023-10-01T00:00",
                "2023-10-01T01:00",
                "2023-10-01T02:00",
                "2023-10-01T03:00",
                "2023-10-01T04:00",
                "2023-10-01T05:00",
                "2023-10-01T06:00",
                "2023-10-01T07:00",
                "2023-10-01T08:00",
                "2023-10-01T09:00",
                "2023-10-01T10:00",
                "2023-10-01T11:00",
                "2023-10-01T12:00",
                "2023-10-01T13:00",
                "2023-10-01T14:00",
                "2023-10-01T15:00",
                "2023-10-01T16:00",
                "2023-10-01T17:00",
                "2023-10-01T18:00",
                "2023-10-01T19:00",
                "2023-10-01T20:00",
                "2023-10-01T21:00",
                "2023-10-01T22:00",
                "2023-10-01T23:00",
                "2023-10-02T00:00",
                "2023-10-02T01:00",
                "2023-10-02T02:00",
                "2023-10-02T03:00",
                "2023-10-02T04:00",
                "2023-10-02T05:00",
                "2023-10-02T06:00",
                "2023-10-02T07:00",
                "2023-10-02T08:00",
                "2023-10-02T09:00",
                "2023-10-02T10:00",
                "2023-10-02T11:00",
                "2023-10-02T12:00",
                "2023-10-02T13:00",
                "2023-10-02T14:00",
                "2023-10-02T15:00",
                "2023-10-02T16:00",
                "2023-10-02T17:00",
                "2023-10-02T18:00",
                "2023-10-02T19:00",
                "2023-10-02T20:00",
                "2023-10-02T21:00",
                "2023-10-02T22:00",
                "2023-10-02T23:00",
                "2023-10-03T00:00",
                "2023-10-03T01:00",
                "2023-10-03T02:00",
                "2023-10-03T03:00",
                "2023-10-03T04:00",
                "2023-10-03T05:00",
                "2023-10-03T06:00",
                "2023-10-03T07:00",
                "2023-10-03T08:00",
                "2023-10-03T09:00",
                "2023-10-03T10:00",
                "2023-10-03T11:00",
                "2023-10-03T12:00",
                "2023-10-03T13:00",
                "2023-10-03T14:00",
                "2023-10-03T15:00",
                "2023-10-03T16:00",
                "2023-10-03T17:00",
                "2023-10-03T18:00",
                "2023-10-03T19:00",
                "2023-10-03T20:00",
                "2023-10-03T21:00",
                "2023-10-03T22:00",
                "2023-10-03T23:00",
                "2023-10-04T00:00",
                "2023-10-04T01:00",
                "2023-10-04T02:00",
                "2023-10-04T03:00",
                "2023-10-04T04:00",
                "2023-10-04T05:00",
                "2023-10-04T06:00",
                "2023-10-04T07:00",
                "2023-10-04T08:00",
                "2023-10-04T09:00",
                "2023-10-04T10:00",
                "2023-10-04T11:00",
                "2023-10-04T12:00",
                "2023-10-04T13:00",
                "2023-10-04T14:00",
                "2023-10-04T15:00",
                "2023-10-04T16:00",
                "2023-10-04T17:00",
                "2023-10-04T18:00",
                "2023-10-04T19:00",
                "2023-10-04T20:00",
                "2023-10-04T21:00",
                "2023-10-04T22:00",
                "2023-10-04T23:00",
                "2023-10-05T00:00",
                "2023-10-05T01:00",
                "2023-10-05T02:00",
                "2023-10-05T03:00",
                "2023-10-05T04:00",
                "2023-10-05T05:00",
                "2023-10-05T06:00",
                "2023-10-05T07:00",
                "2023-10-05T08:00",
                "2023-10-05T09:00",
                "2023-10-05T10:00",
                "2023-10-05T11:00",
                "2023-10-05T12:00",
                "2023-10-05T13:00",
                "2023-10-05T14:00",
                "2023-10-05T15:00",
                "2023-10-05T16:00",
                "2023-10-05T17:00",
                "2023-10-05T18:00",
                "2023-10-05T19:00",
                "2023-10-05T20:00",
                "2023-10-05T21:00",
                "2023-10-05T22:00",
                "2023-10-05T23:00",
                "2023-10-06T00:00",
                "2023-10-06T01:00",
                "2023-10-06T02:00",
                "2023-10-06T03:00",
                "2023-10-06T04:00",
                "2023-10-06T05:00",
                "2023-10-06T06:00",
                "2023-10-06T07:00",
                "2023-10-06T08:00",
                "2023-10-06T09:00",
                "2023-10-06T10:00",
                "2023-10-06T11:00",
                "2023-10-06T12:00",
                "2023-10-06T13:00",
                "2023-10-06T14:00",
                "2023-10-06T15:00",
                "2023-10-06T16:00",
                "2023-10-06T17:00",
                "2023-10-06T18:00",
                "2023-10-06T19:00",
                "2023-10-06T20:00",
                "2023-10-06T21:00",
                "2023-10-06T22:00",
                "2023-10-06T23:00",
                "2023-10-07T00:00",
                "2023-10-07T01:00",
                "2023-10-07T02:00",
                "2023-10-07T03:00",
                "2023-10-07T04:00",
                "2023-10-07T05:00",
                "2023-10-07T06:00",
                "2023-10-07T07:00",
                "2023-10-07T08:00",
                "2023-10-07T09:00",
                "2023-10-07T10:00",
                "2023-10-07T11:00",
                "2023-10-07T12:00",
                "2023-10-07T13:00",
                "2023-10-07T14:00",
                "2023-10-07T15:00",
                "2023-10-07T16:00",
                "2023-10-07T17:00",
                "2023-10-07T18:00",
                "2023-10-07T19:00",
                "2023-10-07T20:00",
                "2023-10-07T21:00",
                "2023-10-07T22:00",
                "2023-10-07T23:00",
                "2023-10-08T00:00",
                "2023-10-08T01:00",
                "2023-10-08T02:00",
                "2023-10-08T03:00",
                "2023-10-08T04:00",
                "2023-10-08T05:00",
                "2023-10-08T06:00",
                "2023-10-08T07:00",
                "2023-10-08T08:00",
                "2023-10-08T09:00",
                "2023-10-08T10:00",
                "2023-10-08T11:00",
                "2023-10-08T12:00",
                "2023-10-08T13:00",
                "2023-10-08T14:00",
                "2023-10-08T15:00",
                "2023-10-08T16:00",
                "2023-10-08T17:00",
                "2023-10-08T18:00",
                "2023-10-08T19:00",
                "2023-10-08T20:00",
                "2023-10-08T21:00",
                "2023-10-08T22:00",
                "2023-10-08T23:00",
                "2023-10-09T00:00",
                "2023-10-09T01:00",
                "2023-10-09T02:00",
                "2023-10-09T03:00",
                "2023-10-09T04:00",
                "2023-10-09T05:00",
                "2023-10-09T06:00",
                "2023-10-09T07:00",
                "2023-10-09T08:00",
                "2023-10-09T09:00",
                "2023-10-09T10:00",
                "2023-10-09T11:00",
                "2023-10-09T12:00",
                "2023-10-09T13:00",
                "2023-10-09T14:00",
                "2023-10-09T15:00",
                "2023-10-09T16:00",
                "2023-10-09T17:00",
                "2023-10-09T18:00",
                "2023-10-09T19:00",
                "2023-10-09T20:00",
                "2023-10-09T21:00",
                "2023-10-09T22:00",
                "2023-10-09T23:00",
                "2023-10-10T00:00",
                "2023-10-10T01:00",
                "2023-10-10T02:00",
                "2023-10-10T03:00",
                "2023-10-10T04:00",
                "2023-10-10T05:00",
                "2023-10-10T06:00",
                "2023-10-10T07:00",
                "2023-10-10T08:00",
                "2023-10-10T09:00",
                "2023-10-10T10:00",
                "2023-10-10T11:00",
                "2023-10-10T12:00",
                "2023-10-10T13:00",
                "2023-10-10T14:00",
                "2023-10-10T15:00",
                "2023-10-10T16:00",
                "2023-10-10T17:00",
                "2023-10-10T18:00",
                "2023-10-10T19:00",
                "2023-10-10T20:00",
                "2023-10-10T21:00",
                "2023-10-10T22:00",
                "2023-10-10T23:00",
            ],
            relativehumidity_2m: [
                88, 89, 87, 87, 88, 89, 89, 90, 90, 88, 81, 74, 65, 62, 67, 68,
                68, 73, 75, 77, 84, 85, 85, 86, 85, 84, 88, 89, 89, 88, 87, 87,
                87, 81, 76, 69, 72, 74, 69, 71, 73, 72, 73, 76, 82, 84, 85, 87,
                88, 89, 89, 89, 89, 90, 90, 89, 87, 83, 79, 75, 72, 72, 78, 76,
                77, 77, 79, 80, 82, 84, 86, 87, 88, 88, 89, 90, 91, 89, 87, 87,
                90, 82, 75, 70, 67, 63, 62, 62, 63, 66, 71, 76, 84, 86, 88, 89,
                89, 90, 89, 90, 91, 92, 92, 91, 86, 81, 77, 71, 67, 64, 59, 60,
                60, 62, 64, 70, 80, 84, 87, 88, 88, 89, 90, 91, 92, 92, 92, 92,
                89, 83, 77, 68, 65, 64, 64, 65, 67, 68, 72, 75, 78, 82, 85, 86,
                87, 88, 90, 90, 91, 92, 92, 93, 88, 83, 76, 70, 64, 62, 57, 56,
                57, 60, 64, 70, 80, 84, 87, 88, 86, 86, 88, 88, 89, 90, 91, 91,
                89, 82, 76, 67, 60, 55, 56, 54, 56, 59, 64, 70, 72, 77, 80, 82,
                84, 85, 86, 87, 87, 88, 88, 89, 85, 80, 74, 69, 65, 63, 60, 60,
                64, 69, 71, 73, 76, 79, 81, 82, 83, 84, 86, 86, 86, 86, 86, 86,
                85, 80, 73, 67, 62, 60, 57, 57, 64, 71, 73, 74, 77, 79, 80, 81,
            ],
            direct_radiation: [
                0, 0, 0, 0, 0, 0, 0, 0, 13, 78, 213, 264, 381, 389, 319, 270,
                177, 145, 55, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 17, 103,
                224, 415, 423, 332, 281, 292, 159, 90, 34, 1, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 17, 109, 235, 355, 418, 405, 263, 227, 127,
                88, 30, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 17, 141, 251,
                433, 507, 611, 593, 478, 411, 286, 141, 22, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 57, 198, 358, 500, 597, 554, 575, 528, 444, 339,
                163, 25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 208, 334, 552,
                624, 565, 477, 400, 388, 267, 145, 24, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 45, 180, 358, 499, 547, 621, 628, 584, 406, 126, 18,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 74, 273, 443, 582, 663,
                706, 680, 615, 431, 292, 156, 16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 43, 216, 366, 503, 570, 668, 611, 626, 472, 289, 136, 12,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 179, 345, 371, 230, 197,
                293, 407, 360, 179, 39, 4, 0, 0, 0, 0,
            ],
        },
        daily_units: {
            time: "iso8601",
            temperature_2m_max: "°C",
            temperature_2m_min: "°C",
        },
        daily: {
            time: [
                "2023-10-01",
                "2023-10-02",
                "2023-10-03",
                "2023-10-04",
                "2023-10-05",
                "2023-10-06",
                "2023-10-07",
                "2023-10-08",
                "2023-10-09",
                "2023-10-10",
            ],
            temperature_2m_max: [
                31.2, 30.5, 30.2, 31.4, 32.1, 31.7, 32.9, 32.5, 32.3, 32.2,
            ],
            temperature_2m_min: [
                26.5, 27, 26.8, 26.3, 26.8, 26.7, 27.2, 26.5, 27.1, 26.9,
            ],
        },
    };

    const reformattedData = ReformatData(static_data, "humidity");
    const reformattedData_temperature = ReformatData(static_data, "temperature");
    console.log(reformattedData);

    const fetchData = async () => {
        setIsLoading(true);
        try {
            const response = await fetch(apiUrl);
            if (!response.ok) {
                throw new Error(`Error: ${response.status}`);
            }
            const result = await response.json();
            setData(result);
        } catch (error) {
            setError(error.message);
        } finally {
            setIsLoading(false);
        }
    };

    useEffect(() => {
        fetchData();
    }, []);

    console.log(reformattedData_temperature);

    return (
        <>
            <div className="container mx-auto">
                <h1>Relative Humidity</h1>
                <BarCharts data={reformattedData}></BarCharts>
                <LineCharts data={reformattedData_temperature}></LineCharts>
            </div>
        </>
    );
}

export default App;
